import{_ as c,r as d,o as r,c as o,a as e,d as t,e as a,b as n}from"./app.f9a431a9.js";const s={},l=a('<h1 id="thuc-hanh-buoi-4" tabindex="-1"><a class="header-anchor" href="#thuc-hanh-buoi-4" aria-hidden="true">#</a> Th\u1EF1c h\xE0nh bu\u1ED5i 4</h1><div class="custom-container tip"><p class="custom-container-title">\u{1F4DD} \u0110\u1EC0 B\xC0I</p><div class="pdfZen"><iframe src="https://drive.google.com/file/d/1yC_AMzdyaNDbFktZ4c_-FTfnK1b0Bt1z/preview"></iframe></div></div><h2 id="kien-thuc" tabindex="-1"><a class="header-anchor" href="#kien-thuc" aria-hidden="true">#</a> Ki\u1EBFn th\u1EE9c</h2><h3 id="\u0111inh-tuyen-noi-mien" tabindex="-1"><a class="header-anchor" href="#\u0111inh-tuyen-noi-mien" aria-hidden="true">#</a> \u0110\u1ECBnh tuy\u1EBFn n\u1ED9i mi\u1EC1n</h3><ul><li><p>L\xE0 nh\xF3m c\xE1c m\u1EA1ng <code>LAN</code> v\xE0 <code>router</code> c\xF3 chung ch\xEDnh s\xE1ch qu\u1EA3n tr\u1ECB.</p></li><li><p>C\xE1c gi\u1EA3i thu\u1EADt m\xE0 <code>router</code> s\u1EED d\u1EE5ng \u0111\u1EC3 v\u1EA1ch \u0111\u01B0\u1EDDng g\u1ECDi l\xE0 <code>IGP</code> (<em>Interior GateWay Protocol</em>).</p></li></ul>',5),u={class:"custom-container tip"},h=e("p",{class:"custom-container-title"},[n("\u{1F4A1} Gi\u1EA3i thu\u1EADt "),e("code",null,"RIP"),n(" v\xE0 "),e("code",null,"OSPF")],-1),p=e("code",null,"RIP",-1),g=n(" ("),v={href:"https://en.wikipedia.org/wiki/Routing_Information_Protocol",target:"_blank",rel:"noopener noreferrer"},m=n("Routing Information Protocol"),b=n(")"),f=n(": s\u1EED d\u1EE5ng gi\u1EA3i thu\u1EADt "),k=e("code",null,"Distance Vector",-1),x=n(" ("),_=n("theo nguy\xEAn l\xFD "),S={href:"https://vi.wikipedia.org/wiki/Thu%E1%BA%ADt_to%C3%A1n_Bellman%E2%80%93Ford",target:"_blank",rel:"noopener noreferrer"},y=n("bellman-Ford"),w=n("), phi\xEAn b\u1EA3n "),q=e("code",null,"RIP",-1),I=n(" version "),P=e("strong",null,"2",-1),T=n(":"),Z=e("li",null,[e("p",null,[n("\u0110\u01A1n v\u1ECB \u0111o kho\u1EA3ng c\xE1ch d\xF9ng trong v\u1EA1ch \u0111\u01B0\u1EDDng l\xE0 "),e("code",null,"hops")])],-1),z=e("li",null,[e("p",null,[n("S\u1ED1 l\u01B0\u1EE3ng s\u1ED1 b\u01B0\u1EDBc nh\u1EA3y t\u1ED1i \u0111a l\xE0 "),e("code",null,"15")])],-1),B=e("li",null,[e("p",null,[n("Ch\xF9 k\u1EF3 c\u1EADp nh\u1EADt b\u1EA3ng v\u1EA1ch \u0111\u01B0\u1EDDng l\xE0 "),e("code",null,"30s"),n(" ("),e("em",null,"c\xF3 th\u1EC3 t\xF9y ch\u1EC9nh"),n(")")])],-1),N=n("T\u1EA7ng v\u1EADn chuy\u1EC3n s\u1EED d\u1EE5ng "),C={href:"https://vi.wikipedia.org/wiki/UDP",target:"_blank",rel:"noopener noreferrer"},D=n("UDP"),F=n(" v\u1EDBi c\u1ED5ng l\xE0 "),H=e("code",null,"520",-1),R=n("H\u1ED7 tr\u1EE3 "),K={href:"https://quantrimang.com/cidr-la-gi-165535",target:"_blank",rel:"noopener noreferrer"},O=n("CIDR"),L=n(" v\xE0 "),M={href:"https://vi.wikipedia.org/wiki/MD5",target:"_blank",rel:"noopener noreferrer"},Q=n("MD5"),G=e("p",null,[n("==> Ph\xF9 h\u1EE3p tri\u1EC3n khai tr\xEAn c\xE1c "),e("strong",null,"\u0111\u1ECBnh tuy\u1EBFn n\u1ED9i mi\u1EC1n"),n(" c\xF3 k\xEDch th\u01B0\u1EDBc nh\u1ECF v\xE0 kh\xF4ng ph\u1EE9c t\u1EA1p")],-1),A=e("code",null,"OSPF",-1),E=n(" ("),X={href:"https://vi.wikipedia.org/wiki/OSPF",target:"_blank",rel:"noopener noreferrer"},U=n("Open Shortest Path First"),V=n("): s\u1EED d\u1EE5ng gi\u1EA3i thu\u1EADt "),W=e("code",null,"LSP",-1),j=n(" ("),J=e("em",null,"Link State Packet",-1),Y=n(") d\u1EF1a tr\xEAn thu\u1EADt to\xE1n "),$={href:"https://vi.wikipedia.org/wiki/Thu%E1%BA%ADt_to%C3%A1n_Dijkstra",target:"_blank",rel:"noopener noreferrer"},ee=n("Dijkstra"),ne=n(", phi\xEAn b\u1EA3n "),ie=e("code",null,"OSPF",-1),te=n(" version "),ae=e("strong",null,"2",-1),ce=e("li",null,[e("p",null,"H\u1ED9i t\u1EE5 nhanh v\xE0 kh\xF4ng c\xF3 t\xECnh tr\u1EB7ng l\u1EB7p v\xF4 t\u1EADn vi\u1EC7c v\u1EA1ch \u0111\u01B0\u1EDDng")],-1),de=e("li",null,[e("p",null,"H\u1ED7 tr\u1EE3 m\u1EA1ng k\xEDch th\u01B0\u1EDBc l\u1EDBn")],-1),re=n("H\u1ED7 tr\u1EE3 "),oe={href:"https://quantrimang.com/cidr-la-gi-165535",target:"_blank",rel:"noopener noreferrer"},se=n("CIDR"),le=n(" v\xE0 "),ue={href:"https://vi.wikipedia.org/wiki/MD5",target:"_blank",rel:"noopener noreferrer"},he=n("MD5"),pe=e("p",null,[n("==> Ph\xF9 h\u1EE3p tri\u1EC3n khai tr\xEAn c\xE1c "),e("strong",null,"\u0111\u1ECBnh tuy\u1EBFn n\u1ED9i mi\u1EC1n"),n(" c\xF3 k\xEDch th\u01B0\u1EDBc l\u1EDBn v\xE0 ph\u1EE9c t\u1EA1p")],-1),ge=a(`<div class="custom-container warning"><p class="custom-container-title">\u26A0\uFE0F L\u01AFU \xDD</p><ul><li><p>Trong <code>kathara</code> \u0111\u1EC3 s\u1EED d\u1EE5ng <strong>\u0111\u1ECBnh tuy\u1EBFn n\u1ED9i mi\u1EC1n</strong> s\u1EED d\u1EE5ng c\xF4ng c\u1EE5 c\xF3 s\u1EB5n l\xE0 <code>Quagga</code>: l\xE0 d\u1ECBch v\u1EE5 ch\u1EE9a c\xE1c gi\u1EA3i thu\u1EADt v\u1EA1ch \u0111\u01B0\u1EDDng nh\u01B0 <code>RIPv2</code> v\xE0 <code>OSPFv2</code> ho\u1EA1t \u0111\u1ED9ng t\u1ED1t tr\xEAn <code>IPv4</code>, <code>IPv6</code>...</p></li><li><p>\u0110\u01B0\u1EE3c c\xE0i \u0111\u1EB7t t\u1EA1i \u0111\u01B0\u1EDDng d\u1EABn <code>/etc/quagga</code> trong m\xE1y \u1EA3o <code>Kathara</code></p></li></ul></div><h2 id="_1-bai-tap-12" tabindex="-1"><a class="header-anchor" href="#_1-bai-tap-12" aria-hidden="true">#</a> 1.B\xE0i t\u1EADp 12</h2><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} M\xD4 H\xCCNH</p><p>X\xE2y d\u1EF1ng h\u1EC7 th\u1ED1ng m\u1EA1ng v\u1EDBi m\xF4 h\xECnh nh\u01B0 sau :</p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/10/17-18-52-12-Screen Shot 2021-10-17 at 18.52.04.png"></div><h3 id="tao-thu-muc-va-cac-file" tabindex="-1"><a class="header-anchor" href="#tao-thu-muc-va-cac-file" aria-hidden="true">#</a> T\u1EA1o th\u01B0 m\u1EE5c v\xE0 c\xE1c file</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mkdir ~/Desktop/BaiTap12
cd ~/Desktop/BaiTap12
mkdir router1 router2 router3 router4 
touch lab.conf router1.startup router2.startup router3.startup router4.startup
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/10/31-16-57-29-Screenshot from 2021-10-31 14-36-10.png" width="500"></blockquote><h3 id="thiet-lap-cac-file" tabindex="-1"><a class="header-anchor" href="#thiet-lap-cac-file" aria-hidden="true">#</a> Thi\u1EBFt l\u1EADp c\xE1c file</h3><p>:::: tabs</p><p>::: tab lab.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>router1[0]=H
router1[1]=G
router1[2]=E
router1[3]=A

router2[0]=E
router2[1]=F
router2[2]=B

router3[0]=F
router3[1]=G
router3[2]=I
router3[3]=C

router4[0]=D
router4[1]=I
router4[2]=H
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router1.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 100.1.0.13/30 up
ifconfig eth1 100.1.0.9/30 up
ifconfig eth2 100.1.0.1/30 up
ifconfig eth3 100.1.1.1/24 up
/etc/init.d/quagga start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router2.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 100.1.0.2/30 up
ifconfig eth1 100.1.2.1/24 up
ifconfig eth2 100.1.2.1/24 up
/etc/init.d/quagga start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router3.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 100.1.0.6/30 up
ifconfig eth1 100.1.0.10/30 up
ifconfig eth2 100.1.0.17/30 up
ifconfig eth3 100.1.3.1/24 up
/etc/init.d/quagga start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router4.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 100.1.4.1/24 up
ifconfig eth1 100.1.0.18/30 up
ifconfig eth2 100.1.0.14/30 up
/etc/init.d/quagga start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>::: ::::</p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/10/31-15-22-49-Screen Shot 2021-10-31 at 15.22.42.png" width="600"></blockquote><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} Gi\u1EA3i th\xEDch</p><p>L\u1EC7nh <code>etc/init.d/quagga start</code>: \u0111\u1EC3 kh\u1EDFi \u0111\u1ED9ng d\u1ECBch v\u1EE5 <code>Quagga</code></p></div><h3 id="cau-hinh-quagga" tabindex="-1"><a class="header-anchor" href="#cau-hinh-quagga" aria-hidden="true">#</a> C\u1EA5u h\xECnh <code>Quagga</code></h3><p>Trong m\u1ED7i th\u01B0 vi\u1EC7n <code>router</code> h\xE3y t\u1EA1o th\u01B0 m\u1EE5c v\xE0 c\u1EA5u h\xECnh nh\u01B0 sau :</p><div class="language-txt-no ext-txt-no"><pre class="language-txt-no"><code>-- router1
   -- etc
      -- quagga
       + daemons
       + ripd.conf
       + zebra.conf
</code></pre></div><p>:::: tabs</p><p>::: tab daemons</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>zebra=yes
ripd=yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab zebra.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>hostname zebra
password zebra
enable password zebra
log file /var/log/zebra/zebra.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab rip.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>hostname ripd
password zebra
enable password zebra

router rip
network 100.1.0.0/16
redistribute connected
log file /var/log/zebra/ripd.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>::: ::::</p><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} GI\u1EA2I TH\xCDCH</p><ul><li><p><code>zebra.conf</code>: ch\u1EE9a n\u1ED9i dung mi\xEAu t\u1EA3 cho c\xF4ng c\u1EE5 <code>Quagga</code> nh\u01B0 :</p><ol><li><p>username v\xE0 password</p></li><li><p>\u0110\u01B0\u1EDDng d\u1EABn nh\u1EADt k\xFD (<code>log file</code>)</p></li></ol></li><li><p><code>daemons</code>: ch\u1EE9a khai b\xE1o c\xE1c giao th\u1EE9c v\u1EA1ch \u0111\u01B0\u1EDDng \u0111\u01B0\u1EE3c <code>Quagga</code> h\u1ED7 tr\u1EE3 nh\u01B0 :</p><ol><li><p><code>RIPv2</code> tr\xEAn <code>IPv4</code>: \u0111\u1EB7t t\xEAn l\xE0 <code>ripd</code></p></li><li><p><code>OSPFv2</code> tr\xEAn <code>IPv4</code>: \u0111\u1EB7t t\xEAn l\xE0 <code>ospfd</code></p></li><li><p><code>BGP</code> tr\xEAn <code>IPv4</code> v\xE0 <code>IPv6</code>: \u0111\u1EB7t t\xEAn l\xE0 <code>bgpd</code></p></li></ol></li><li><p><code>ripd.conf</code>: ch\u1EE9a n\u1ED9i dung mi\xEAu t\u1EA3 ho\u1EA1t \u0111\u1ED9ng c\u1EE7a gi\u1EA3i thu\u1EADt <code>RIPv2</code></p><ol><li><p>L\u1EC7nh <code>router rip</code>: cho bi\u1EBFt router s\u1EBD s\u1EED d\u1EE5ng <code>RIPv2</code> l\xE0m v\u1EA1ch \u0111\u01B0\u1EDDng</p></li><li><p>L\u1EC7nh <code>network</code>: l\xE0 ph\u1EA1m vi g\u1EEDi v\xE0 nh\u1EADn g\xF3i tin, c\xF3 th\u1EC3 s\u1EED d\u1EE5ng <code>ip</code> kh\xE1c d\u01B0\u1EDBi <code>24</code></p></li><li><p>L\u1EC7nh <code>redistribute connected</code>: cho ph\xE9p router \u0111\xF3ng g\xF3i c\xE1c th\xF4ng tin v\u1EC1 nh\u1EEFng nh\xE1nh m\u1EA1ng</p></li></ol></li></ul></div><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} M\u1EB8O</p><p>S\u1EED d\u1EE5ng l\u1EC7nh sau \u0111\u1EC3 copy qua c\xE1c router c\xF2n l\u1EA1i</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>cp -r router1/etc router2
cp -r router1/etc router3
cp -r router1/etc router4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>S\u1EED d\u1EE5ng l\u1EC7nh <code>tree</code> \u0111\u1EC3 xem c\u1EA5u tr\xFAc file (<em>c\xE0i b\u1EB1ng l\u1EC7nh sau:</em> <code>sudo apt install tree</code>)</p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/10/31-17-33-18-Screen Shot 2021-10-31 at 17.33.08.png" width="250"></blockquote><h3 id="khoi-\u0111ong-may-ao" tabindex="-1"><a class="header-anchor" href="#khoi-\u0111ong-may-ao" aria-hidden="true">#</a> Kh\u1EDFi \u0111\u1ED9ng m\xE1y \u1EA3o</h3><p>S\u1EED d\u1EE5ng d\u1EE5ng l\u1EC7nh sau \u0111\u1EC3 kh\u1EDFi t\u1EA1o c\xE1c m\xE1y \u1EA3o <code>Kathara</code> v\u1EEBa kh\u1EDFi t\u1EA1o :</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kathara lstart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-13-38-21-Screen Shot 2021-10-31 at 17.40.46.png"><p>V\u1EADy l\xE0 b\u1EA1n \u0111\xE3 s\u1EED d\u1EE5ng d\u1ECBch v\u1EE5 <code>Quagga</code> th\xE0nh c\xF4ng.</p></blockquote><p>S\u1EED d\u1EE5ng l\u1EC7nh sau \u0111\u1EC3 ki\u1EC3m tra d\u1ECBch v\u1EE5 <code>Quagga</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/etc/init.d/quagga status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-13-41-18-Screen Shot 2021-11-01 at 13.41.12.png"><ol><li><p>N\u1EBFu kh\xF4ng hi\u1EC7n g\xEC c\u1EA3 ==&gt; d\u1ECBch v\u1EE5 ch\u01B0a \u0111\u01B0\u1EE3c kh\u1EDFi \u0111\u1ED9ng</p></li><li><p><code>ripd watchquagga</code> ==&gt; thi\u1EBFt l\u1EADp cho <code>RIPv2</code> v\xE0 <code>Quagga</code> \u0111\xE3 th\xE0nh c\xF4ng</p></li><li><p><code>watchquagga</code> ==&gt; c\xF3 sai s\xF3t tr\xEAn <code>ripd.conf</code> n\xEAn <code>RIPv2</code> kh\xF4ng ho\u1EA1t \u0111\u1ED9ng</p></li></ol></blockquote><h3 id="nhan-xet-may-ao" tabindex="-1"><a class="header-anchor" href="#nhan-xet-may-ao" aria-hidden="true">#</a> Nh\u1EADn x\xE9t m\xE1y \u1EA3o</h3><p>S\u1EED d\u1EE5ng l\u1EC7nh <code>route</code> \u0111\u1EC3 ki\u1EC3m tra v\u1EA1ch \u0111\u01B0\u1EDDng tr\xEAn c\xE1ch m\xE1y \u1EA3o :</p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-15-51-55-Screen Shot 2021-11-01 at 15.51.50.png"></blockquote><h4 id="kiem-tra-ping" tabindex="-1"><a class="header-anchor" href="#kiem-tra-ping" aria-hidden="true">#</a> Ki\u1EC3m tra ping</h4><p>T\u1EEB <code>router1</code> h\xE3y ping t\u1EDBi <code>router4</code> v\xE0 t\u1EEB <code>router2</code> \u0111\u1EBFn <code>router4</code> b\u1EB1ng l\u1EC7nh sau:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code># th\u1EF1c hi\u1EC7n tr\xEAn pc1
ping 100.1.4.1 -c 5 
# th\u1EF1c hi\u1EC7n tr\xEAn pc2
ping 100.1.0.10 -c 5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-15-54-40-Screen Shot 2021-11-01 at 15.54.36.png"></blockquote><h4 id="kiem-tra-tcpdump" tabindex="-1"><a class="header-anchor" href="#kiem-tra-tcpdump" aria-hidden="true">#</a> Ki\u1EC3m tra <code>tcpdump</code></h4><p>S\u1EED d\u1EE5ng l\u1EC7nh <code>tcpdump</code> sau \u0111\xE2y tr\xEAn <code>router1</code> \u0111\u1EC3 ki\u1EC3m tra \u0111\u01B0\u1EDDng \u0111i c\xE1c g\xF3i tin</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>tcmpdump -i any -w /shared/BaiTap12_router1.pcap
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-16-03-06-Screen Shot 2021-11-01 at 16.02.55.png"></blockquote><div class="custom-container warning"><p class="custom-container-title">\u26A0\uFE0F L\u01AFU \xDD</p><p>S\u1EED d\u1EE5ng <code>CRTL+C</code> \u0111\u1EC3 d\u1EEBng sau t\u1EA7m <code>20s</code></p></div><h4 id="kiem-tra-telnet" tabindex="-1"><a class="header-anchor" href="#kiem-tra-telnet" aria-hidden="true">#</a> Ki\u1EC3m tra <code>telnet</code></h4><p>Tr\xEAn <code>router</code> b\u1EA5t k\u1EF3 s\u1EED d\u1EE5ng l\u1EC7nh sau \u0111\u1EC3 \u0111\u0103ng nh\u1EADp v\xE0o d\u1ECBch v\u1EE5 <code>RIPv2</code>:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>telnet localhost ripd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>Password : <code>zebra</code></p></blockquote><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-16-56-04-Screen Shot 2021-11-01 at 16.55.57.png"></blockquote><p>Sau \u0111\xF3 tr\xEAn giao di\u1EC7n <code>ripd</code>, s\u1EED d\u1EE5ng l\u1EC7nh:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>show ip rip
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-16-58-08-Screen Shot 2021-11-01 at 16.58.05.png"></blockquote><h3 id="phan-tich-pcap-bang-wireshark" tabindex="-1"><a class="header-anchor" href="#phan-tich-pcap-bang-wireshark" aria-hidden="true">#</a> Ph\xE2n t\xEDch pcap b\u1EB1ng WireShark</h3><p>M\u1EDF g\xF3i <code>BaiTap12_router1.pcap</code> trong th\u01B0 m\u1EE5c <code>shared</code> b\u1EB1ng <code>WireShark</code> v\xE0 ch\u1ECDn g\xF3i tin c\xF3 \u0111\u1ECBa ch\u1EC9 <code>100.1.0.10</code> (<em>router3</em>)</p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-17-24-37-Screen Shot 2021-11-01 at 17.23.43.png"></blockquote><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} NH\u1EACN X\xC9T</p><ul><li><p>\u0110\u1ECBa ch\u1EC9 IP \u0111\xEDch c\u1EE7a khung n\xE0y l\xE0 <code>224.0.0.9</code>, n\xF3 l\xE0 \u0111\u1ECBa ch\u1EC9 <code>Multicast</code> (<em>v\xEC c\xE1c <code>packages</code> g\u1EEDi \u0111\u1EBFn nh\u1EEFng \u0111\xEDch m\xE0 n\xF3 c\xF9ng giao th\u1EE9c m\u1EA1ng v\u1EDBi ngu\u1ED3n</em>)</p></li><li><p>G\xF3i tin s\u1EED d\u1EE5ng giao th\u1EE9c tr\xEAn <strong>t\u1EA7ng v\u1EADn chuy\u1EC3n l\xE0</strong> <code>user datagram</code>, v\xE0 ho\u1EA1t \u0111\u1ED9ng \u1EDF c\u1ED5ng <code>520</code></p></li><li><p>Trong tr\u01B0\u1EDDng <code>Routing Infomation Protocol</code> \u0111\xE2y l\xE0 b\u1ED9 \u0111\u1ECBnh tuy\u1EBFn s\u1EED d\u1EE5ng gi\u1EA3i thu\u1EADt <code>RIPv2</code></p></li><li><p>Ngo\xE0i g\xF3i tin <code>RIPv2</code> c\xF3 \u0111\u1ECBa ch\u1EC9 <code>100.1.0.10</code> th\xEC <code>router3</code> c\xF2n nh\u1EADn d\u1EEF li\u1EC7u c\u1EE7a c\xE1c <code>router 1</code>, <code>routere2</code> v\xE0 <code>router4</code></p></li></ul></div><h3 id="tat-mot-nhanh-mang" tabindex="-1"><a class="header-anchor" href="#tat-mot-nhanh-mang" aria-hidden="true">#</a> T\u1EAFt m\u1ED9t nh\xE1nh m\u1EA1ng</h3><p>Tr\xEAn <code>router1</code> th\u1EF1c hi\u1EC7n t\u1EAFt nh\xE1nh m\u1EA1ng <code>eth1</code> b\u1EB1ng l\u1EC7nh</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ifconfig eth1 down
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u0110i\u1EC1u n\xE0y s\u1EBD l\xE0m cho m\xF4 h\xECnh m\u1EA1ng nh\u01B0 sau:</p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-17-30-09-Screen Shot 2021-11-01 at 17.29.39.png" width="500"></blockquote><p>Tr\xEAn <code>router1</code> th\u1EF1c hi\u1EC7n <strong>ping</strong> t\u1EDBi <code>router3</code> b\u1EB1ng l\u1EC7nh</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ping 100.1.0.10 -c 7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-17-32-43-Screen Shot 2021-11-01 at 17.32.38.png"><p>Kh\xF4ng th\xE0nh c\xF4ng v\xEC l\xFAc n\xE0y \u0111\xE3 m\u1EA5t \u0111\u01B0\u1EDDng li\xEAn k\u1EBFt t\u1EDBi <code>router3</code></p></blockquote><p>Th\u1EF1c hi\u1EC7n ki\u1EC3m tra b\u1EA3ng v\u1EA1ch \u0111\u01B0\u1EDDng b\u1EB1ng <code>route</code> c\u1EE7a <code>router1</code>:</p><table><thead><tr><th>C\u0169</th><th>M\u1EDBi</th></tr></thead><tbody><tr><td><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-17-35-14-Screen Shot 2021-11-01 at 17.35.03.png" width="600"></td><td><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-17-34-24-Screen Shot 2021-11-01 at 17.34.16.png" width="600"></td></tr></tbody></table><p>==&gt; C\u1EE5 th\u1EC3 kh\xF4ng c\xF2n li\xEAn k\u1EBFt n\xE0o \u1EDF <code>eth1</code> nh\u01B0 tr\xEAn, giao di\u1EC7n <code>eth2</code> c\u1EE7a <code>router1</code> s\u1EBD thay th\u1EBF giao di\u1EC7n <code>eth1</code> \u0111\xE3 b\u1ECB t\u1EAFt \u0111i</p><div class="custom-container tip"><p class="custom-container-title">K\u1EBET LU\u1EACN</p><p>Gi\u1EA3i thu\u1EADt <code>RIPv2</code> tr\xEAn <code>router</code> t\u1EF1 \u0111\u1ED9ng c\u1EADp nh\u1EADt l\u1EA1i \u0111\u01B0\u1EDDng \u0111i khi c\u1EA5u tr\xFAc m\u1EA1ng thay \u0111\u1ED5i \u0111\u1EC3 \u0111\u1EA3m b\u1EA3o d\u1EEF li\u1EC7u \u0111\u01B0\u1EDDng truy\u1EC1n t\u1EA3i v\u1EDBi \u0111\u01B0\u1EDDng \u0111i ng\u1EAFn nh\u1EA5t v\xE0 kh\xF4ng b\u1ECB m\u1EA5t m\xE1t d\u1EEF li\u1EC7u</p></div><h3 id="huy-may-ao" tabindex="-1"><a class="header-anchor" href="#huy-may-ao" aria-hidden="true">#</a> H\u1EE7y m\xE1y \u1EA3o</h3><p>S\u1EED d\u1EE5ng l\u1EC7nh <code>kathara</code> sau \u0111\u1EC3 h\u1EE7y h\u1EC7 th\u1ED1ng m\xE1y \u1EA3o</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kathara lclean
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/01-17-40-06-Screen Shot 2021-11-01 at 17.40.02.png" width="600"></blockquote><h2 id="_2-bai-tap-13" tabindex="-1"><a class="header-anchor" href="#_2-bai-tap-13" aria-hidden="true">#</a> 2.B\xE0i t\u1EADp 13</h2><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} M\xD4 H\xCCNH</p><p>X\xE2y d\u1EF1ng m\xE1y \u1EA3o theo m\xF4 h\xECnh sau \u0111\xE2y :</p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/02-14-44-48-Screen Shot 2021-11-02 at 14.44.40.png"></div><h3 id="tao-thu-muc-va-cac-file-1" tabindex="-1"><a class="header-anchor" href="#tao-thu-muc-va-cac-file-1" aria-hidden="true">#</a> T\u1EA1o th\u01B0 m\u1EE5c v\xE0 c\xE1c file</h3><p>X\xE2y d\u1EF1ng m\xF4 h\xECnh m\u1EA1ng nh\u01B0 d\u01B0\u1EDBi \u0111\xE2y:</p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-14-56-53-Screenshot from 2021-11-03 14-54-36.png" width="600"><p>B\u1EB1ng c\xE1c l\u1EC7nh sau :</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mkdir ~/Desktop/BaiTap13
cd ~/Desktop/BaiTap13
mkdir router1 router2 router3 router4
touch lab.conf router1.startup router2.startup router3.startup router4.startup
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="thiet-lap-cac-file-1" tabindex="-1"><a class="header-anchor" href="#thiet-lap-cac-file-1" aria-hidden="true">#</a> Thi\u1EBFt l\u1EADp c\xE1c file</h3><p>C\u1EA5u h\xECnh v\xE0 thi\u1EBFt l\u1EADp c\xE1c file nh\u01B0 sau:</p><p>:::: tabs</p><p>::: tab lab.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>router1[0]=H
router1[1]=G
router1[2]=E
router1[3]=A

router2[0]=E
router2[1]=F
router2[2]=B

router3[0]=F
router3[1]=G
router3[2]=I
router3[3]=C

router4[0]=D
router4[1]=I
router4[2]=H
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router1.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 100.1.0.13/30 up
ifconfig eth1 100.1.0.9/30 up
ifconfig eth2 100.1.0.1/30 up
ifconfig eth3 100.1.1.1/24 up
/etc/init.d/quagga start 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router2.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 100.1.0.2/30 up
ifconfig eth1 100.1.0.5/30 up
ifconfig eth2 100.1.2.1/24 up
/etc/init.d/quagga start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router3.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 100.1.0.6/30 up
ifconfig eth1 100.1.0.10/30 up
ifconfig eth2 100.1.0.17/30 up
ifconfig eth3 100.1.3.1/24 up
/etc/init.d/quagga start 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router4.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 100.1.4.1/24 up
ifconfig eth1 100.1.0.18/30 up
ifconfig eth2 100.1.0.14/30 up
/etc/init.d/quagga start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>::: ::::</p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-14-51-06-Screen Shot 2021-11-03 at 14.51.01.png"></blockquote><h3 id="cau-hinh-quagga-1" tabindex="-1"><a class="header-anchor" href="#cau-hinh-quagga-1" aria-hidden="true">#</a> C\u1EA5u h\xECnh <code>Quagga</code></h3><p>Trong m\u1ED7i th\u01B0 vi\u1EC7n <code>router</code> h\xE3y t\u1EA1o th\u01B0 m\u1EE5c nh\u01B0 sau:</p><p>:::: tabs</p><p>::: tab daemons</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>zebra=yes
ospfd=yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab zebra.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>hostname zebra
password zebra
enable password zebra
log file /var/log/zebra/zebra.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab ospfd.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>hostname ospfd
password zebra
enable password zebra

interface eth0
ospf cost 30

interface eth1
ospf cost 80

interface eth2
ospf cost 20

router ospf
network 100.1.0.0/16 area 0.0.0.0
redistribute connected

log file /var/log/zebra/ospfd.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>::: ::::</p><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} M\u1EB8O</p><p>S\u1EED d\u1EE5ng l\u1EC7nh sau \u0111\u1EC3 copy qua c\xE1c router c\xF2n l\u1EA1i</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>cp -r router1/etc router2
cp -r router1/etc router3
cp -r router1/etc router4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><blockquote><p>S\u1EED d\u1EE5ng <code>tree</code> \u0111\u1EC3 ki\u1EC3m tra c\u1EA5u tr\xFAc c\u1EE7a c\xE1c th\u01B0 m\u1EE5c</p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-15-06-55-Screen Shot 2021-11-03 at 15.06.48.png" width="180"></blockquote><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} GI\u1EA2I T\xCDCH</p><ul><li><p>T\u1EA1o file <code>ospfd.conf</code> thay v\xEC <code>ripd.conf</code> v\xEC ch\xFAng ta s\u1EED d\u1EE5ng gi\u1EA3i thu\u1EADt <code>OSPFv2</code> thay v\xEC <code>RIPv2</code></p></li><li><p>L\u1EC7nh <code>interface</code> ch\u1EC9 ra giao di\u1EC7n c\u1EE7a <code>router</code> s\u1EBD ch\u1EA1y gi\u1EA3i thu\u1EADt <code>OSPFv2</code></p></li></ul></div><h3 id="khoi-\u0111ong-may-ao-1" tabindex="-1"><a class="header-anchor" href="#khoi-\u0111ong-may-ao-1" aria-hidden="true">#</a> Kh\u1EDFi \u0111\u1ED9ng m\xE1y \u1EA3o</h3><p>S\u1EED d\u1EE5ng l\u1EC7nh <code>kathara lstart</code> \u0111\u1EC3 kh\u1EDFi \u0111\u1ED9ng h\u1EC7 th\u1ED1ng m\xE1y \u1EA3o v\u1EEBa t\u1EA1o:</p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-15-39-12-Screen Shot 2021-11-03 at 15.39.08.png"><p>==&gt; Kh\xF4ng c\xF3 l\u1ED7i g\xEC x\u1EA3y ra tr\xEAn m\u1ED7i <code>router</code>, c\xE1c c\u1EA5u h\xECnh \u0111\xE3 chu\u1EA9n</p></blockquote><p>S\u1EED d\u1EE5ng l\u1EC7nh sau tr\xEAn t\u1EEBng <code>router</code> \u0111\u1EC3 ki\u1EC3m tra d\u1ECBch v\u1EE5 <code>Quagga</code> v\u1EEBa t\u1EA1o:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/etc/init.d/quagga status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-15-40-53-Screen Shot 2021-11-03 at 15.40.48.png"></blockquote><div class="custom-container warning"><p class="custom-container-title">\u26A0\uFE0F L\u01AFU \xDD</p><ul><li><p>N\u1EBFu hi\u1EC7n <code>ospfd watchquagga zebra</code>: d\u1ECBch v\u1EE5 <code>Quagga</code> \u0111\xE3 \u0111\u01B0\u1EE3c s\u1EED d\u1EE5ng v\xE0 \u0111ang d\xF9ng gi\u1EA3i thu\u1EADt <code>OSFPv2</code></p></li><li><p>N\u1EBFu kh\xF4ng hi\u1EC7n g\xEC h\u1EBFt th\xEC d\u1ECBch v\u1EE5 <code>Quagga</code> \u0111\xE3 x\u1EA3y ra l\u1ED7i</p></li><li><p>N\u1EBFu hi\u1EC7n <code>watchquagga</code> th\xEC c\xF3 sai s\xF3t tr\xEAn <code>ospfd.conf</code> n\xEAn <code>OSFPv2</code> kh\xF4ng ho\u1EA1t \u0111\u1ED9ng</p></li></ul></div><h3 id="nhan-xet-may-ao-1" tabindex="-1"><a class="header-anchor" href="#nhan-xet-may-ao-1" aria-hidden="true">#</a> Nh\u1EADn x\xE9t m\xE1y \u1EA3o</h3><h4 id="kiem-tra-vach-\u0111uong" tabindex="-1"><a class="header-anchor" href="#kiem-tra-vach-\u0111uong" aria-hidden="true">#</a> Ki\u1EC3m tra v\u1EA1ch \u0111\u01B0\u1EDDng</h4><p>S\u1EED d\u1EE5ng l\u1EC7nh <code>route</code> tr\xEAn t\u1EEBng <code>router</code> \u0111\u1EC3 ki\u1EC3m tra b\u1EA3ng v\u1EA1ch \u0111\u01B0\u1EDDng:</p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-15-45-56-Screen Shot 2021-11-03 at 15.45.53.png"></blockquote><h4 id="kiem-tra-su-lien-thong" tabindex="-1"><a class="header-anchor" href="#kiem-tra-su-lien-thong" aria-hidden="true">#</a> Ki\u1EC3m tra s\u1EF1 li\xEAn th\xF4ng</h4><p>Th\u1EF1c hi\u1EC7n ki\u1EC3m tra s\u1EF1 li\xEAn th\xF4ng gi\u1EEFa c\xE1c <code>router</code> b\u1EB1ng l\u1EC7nh <code>ping</code></p><ul><li><p>T\u1EEB <code>router1</code> t\u1EDBi <code>router4</code></p></li><li><p>T\u1EEB <code>router2</code> t\u1EDBi <code>router3</code></p></li></ul><p>B\u1EB1ng l\u1EC7nh sau \u0111\xE2y:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code># th\u1EF1c hi\u1EC7n tr\xEAn router1
ping 100.1.4.1 -c 5
# th\u1EF1c hi\u1EC7n tr\xEAn router 2
ping 100.1.0.10 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-15-48-43-Screen Shot 2021-11-03 at 15.48.39.png"></blockquote><p>==&gt; Ki\u1EC3m tra th\xE0nh c\xF4ng</p><h3 id="kiem-tra-\u0111uong-\u0111i" tabindex="-1"><a class="header-anchor" href="#kiem-tra-\u0111uong-\u0111i" aria-hidden="true">#</a> Ki\u1EC3m tra \u0111\u01B0\u1EDDng \u0111i</h3><p>Tr\xEAn <code>router1</code> th\u1EF1c hi\u1EC7n c\xE1c l\u1EC7nh nh\u01B0 sau:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>traceroute 100.1.0.5  # eth1 c\u1EE7a router2
traceroute 100.1.0.17 # eth2 c\u1EE7a router3
traceroute 100.1.0.10 # eth1 c\u1EE7a router3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-15-52-15-Screen Shot 2021-11-03 at 15.51.45.png"></blockquote><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} NH\u1EACN X\xC9T</p><p>Nh\u1EDD gi\u1EA3i thu\u1EADt <code>OSPFv2</code> t\u0103ng kh\u1EA3 n\u0103ng m\u1EDF r\u1ED9ng v\xE0 h\u1ED9i t\u1EE5 nhanh m\xE0 <code>router1</code> \u0111i qua c\xE1c nh\xE1nh m\u1EA1ng c\u1EE7a <code>router2</code> v\xE0 <code>router3</code> kh\xF4ng c\xF3 nh\xE1nh m\u1EA1ng trung gian n\xE0o</p></div><h4 id="bat-cac-goi-tin" tabindex="-1"><a class="header-anchor" href="#bat-cac-goi-tin" aria-hidden="true">#</a> B\u1EAFt c\xE1c g\xF3i tin</h4><p>Tr\xEAn <code>router</code> th\u1EF1c hi\u1EC7n l\u1EC7nh sau \u0111\xE2y \u0111\u1EC3 b\u1EAFt c\xE1c g\xF3i tin</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>tcpdump -i any -w /shared/BaiTap13_router1.pcap
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>D\u1EEBng l\u1EA1i sau <code>30s</code> b\u1EB1ng l\u1EC7nh <code>CRTL+C</code></p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-16-03-32-Screen Shot 2021-11-03 at 16.03.28.png"></blockquote><p>M\u1EDF th\u01B0 m\u1EE5c <code>BaiTap12_router1.pcap</code> v\u1EEBa t\u1EA1o b\u1EB1ng <code>WireShark</code> v\xE0 ch\u1ECDn IP ngu\u1ED3n <code>100.1.0.2</code>:</p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-16-11-31-Screen Shot 2021-11-03 at 16.10.56.png"></blockquote><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} NH\u1EACN X\xC9T</p><ul><li><p>\u0110\u1ECBa ch\u1EC9 IP c\u1EE7a khung n\xE0y l\xE0 <code>224.0.0.5</code>, v\xE0 \u0111\xE2y l\xE0 \u0111\u1ECBa ch\u1EC9 <code>Multicast</code> (<em>v\xEC c\xE1c <code>packages</code> g\u1EEDi \u0111\u1EBFn nh\u1EEFng \u0111\xEDch m\xE0 n\xF3 c\xF9ng giao th\u1EE9c m\u1EA1ng v\u1EDBi ngu\u1ED3n</em>)</p></li><li><p>G\xF3i tin n\xE0y d\xF9ng giao th\u1EE9c <code>Open Shortest Path First</code> tr\xEAn t\u1EA7ng v\u1EADn chuy\u1EC3n</p></li><li><p>Trong m\u1EE5c <code>OSPF</code>:</p><ol><li><p>Hi\u1EC7n thu\u1EADt to\xE1n <code>OSPF</code> \u0111ang s\u1EED d\u1EE5ng l\xE0 <code>version 2</code></p></li><li><p><code>Active Neighbor</code> l\xE0 danh s\xE1ch c\xE1c b\u1ED9 \u0111\u1ECBnh tuy\u1EBFn l\xE2n c\u1EADn ho\u1EB7c li\u1EC1n k\u1EC1</p></li><li><p><code>Designated Router</code> l\xE0 b\u1ED9 \u0111\u1ECBnh tuy\u1EBFn li\u1EC1n k\u1EC1 v\u1EDBi b\u1ED9 \u0111\u1ECBnh tuy\u1EBFn hi\u1EC7n t\u1EA1i</p></li><li><p><code>Backup Designated Router</code> ph\u1EE5c v\u1EE5 nh\u01B0 m\u1ED9t ch\u1EBF \u0111\u1ED9 ch\u1EDD \u0111\u1EC3 nh\u1EADn c\u1EADp nh\u1EADt c\xE1c b\u1ED9 \u0111\u1ECBnh tuy\u1EBFn hi\u1EC7n t\u1EA1i</p></li></ol></li></ul></div><h3 id="tat-mot-nhanh-mang-1" tabindex="-1"><a class="header-anchor" href="#tat-mot-nhanh-mang-1" aria-hidden="true">#</a> T\u1EAFt m\u1ED9t nh\xE1nh m\u1EA1ng</h3><p>Tr\xEAn <code>router1</code> h\xE3y t\u1EAFt nh\xE1nh m\u1EA1ng <code>eth1</code> b\u1EB1ng l\u1EC7nh sau:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ifconfig eth1 down
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Sau \u0111\xF3 h\xE3y <code>ping</code> t\u1EDBi <code>router3</code> b\u1EB1ng l\u1EC7nh: <code>ping 100.1.0.10 -c 5</code></p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-16-34-09-Screen Shot 2021-11-03 at 16.33.56.png"></blockquote><p>==&gt; Ping v\u1EABn th\xE0nh c\xF4ng, tuy b\u1EA3ng v\u1EA1ch \u0111\u01B0\u1EDDng \u0111\xE3 thay \u0111\u1ED5i v\xE0 kh\xF4ng c\xF2n <code>eth1</code></p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-16-36-05-Screen Shot 2021-11-03 at 16.35.55.png"><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} NH\u1EACN X\xC9T</p><p>Gi\u1EA3i thu\u1EADt <code>OSPFv2</code> tr\xEAn <code>router</code> t\u1EF1 \u0111\u1ED9ng c\u1EADp nh\u1EADt l\u1EA1i \u0111\u01B0\u1EDDng b\u1EB1ng m\u1ED9t \u0111\u01B0\u1EDDng \u0111i m\u1EDBi, \u0111\u1EC3 \u0111\u1EA3m b\u1EB1ng t\xEDnh li\xEAn th\xF4ng c\u1EE7a c\xE1c <code>router</code> v\xE0 chi ph\xED ng\u1EAFn nh\u1EA5t \u0111\u1EC3 t\u1EEB <code>router</code> \u0111\u1EBFn c\xE1c <code>router</code> c\xF2n l\u1EA1i.</p></div><h3 id="huy-he-thong-may-ao" tabindex="-1"><a class="header-anchor" href="#huy-he-thong-may-ao" aria-hidden="true">#</a> H\u1EE7y h\u1EC7 th\u1ED1ng m\xE1y \u1EA3o</h3><p>S\u1EED d\u1EE5ng l\u1EC7nh <code>kathara lclean</code> \u0111\u1EC3 h\u1EE7y h\u1EC7 th\u1ED1ng m\xE1y \u1EA3o:</p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-16-55-34-Screen Shot 2021-11-03 at 16.55.30.png" width="600"><h2 id="_3-bai-tap-14" tabindex="-1"><a class="header-anchor" href="#_3-bai-tap-14" aria-hidden="true">#</a> 3.B\xE0i t\u1EADp 14</h2><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} M\xD4 H\xCCNH</p><p>X\xE2y d\u1EE5ng h\u1EC7 th\u1ED1ng m\u1EA1ng theo m\xF4 h\xECnh sau:</p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/03-23-16-21-Screen Shot 2021-11-03 at 23.16.17.png"></div><h3 id="tao-thu-muc-va-cac-file-2" tabindex="-1"><a class="header-anchor" href="#tao-thu-muc-va-cac-file-2" aria-hidden="true">#</a> T\u1EA1o th\u01B0 m\u1EE5c v\xE0 c\xE1c file</h3><p>T\u1EA1o c\xE1c th\u01B0 m\u1EE5c v\xE0 file theo m\xF4 h\xECnh nh\u01B0 sau:</p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/04-15-33-07-Screenshot from 2021-11-04 15-32-32.png"><p>B\u1EB1ng c\xE1ch l\u1EC7nh sau:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mkdir ~/Desktop/BaiTap14
cd ~/Desktop/BaiTap14
mkdir pc2 pc3 router1 router2 router3 routerisp
touch lab.conf pc2.startup pc3.startup router1.startup router2.startup router3.startup routerisp.startup
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="thiet-lap-cac-file-2" tabindex="-1"><a class="header-anchor" href="#thiet-lap-cac-file-2" aria-hidden="true">#</a> Thi\u1EBFt l\u1EADp c\xE1c file</h3><p>C\u1EA5u h\xECnh v\xE0 thi\u1EBFt l\u1EADp c\xE1c th\u01B0 m\u1EE5c v\u1EEBa t\u1EA1o nh\u01B0 sau:</p><p>:::: tabs</p><p>::: tab lab.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>pc2[0]=B
pc3[0]=C

router1[0]=A
router1[1]=D
router1[2]=E

router2[0]=B
router2[1]=D
router2[2]=F

router3[0]=C
router3[1]=E
router3[2]=F

routerisp[0]=A
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router1.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 200.117.68.1/30 up
ifconfig eth1 10.0.1.1/30 up
ifconfig eth2 10.0.1.5/30 up
/etc/init.d/quagga start 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router2.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 192.168.1.1/24 up
ifconfig eth1 10.0.1.2/30 up
ifconfig eth2 10.0.1.9/30 up
/etc/init.d/quagga start 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab router3.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 192.168.2.1/24 up
ifconfig eth1 10.0.1.6/30 up
ifconfig eth2 10.0.1.10/30 up
/etc/init.d/quagga start 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab routerisp.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 200.117.68.2/30 up
route add default gw 200.117.68.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab pc2.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 192.168.1.200/24 up
route add default gw 192.168.1.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab pc3.startup</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>ifconfig eth0 192.168.2.111/24 up
route add default gw 192.168.2.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>::: ::::</p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/04-21-06-12-Screen Shot 2021-11-04 at 21.06.05.png"></blockquote><h3 id="cau-hinh-quagga-2" tabindex="-1"><a class="header-anchor" href="#cau-hinh-quagga-2" aria-hidden="true">#</a> C\u1EA5u h\xECnh Quagga</h3><p>Trong m\u1ED7i th\u01B0 vi\u1EC7n <code>router</code> h\xE3y t\u1EA1o m\u1EE5c nh\u01B0 sau:</p><p>:::: tabs</p><p>::: tab daemons</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>zebra=yes
ripd=yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab zebra.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>hostname zebra
password zebra
enable password zebra

log file /var/log/zebra/zebra.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><p>::: tab ripd.conf</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>hostname ripd
password zebra
enable password zebra

router rip
network 10.0.1.0/28
redistribute connected

log file /var/log/zebra/ripd.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>::: ::::</p><div class="custom-container warning"><p class="custom-container-title">\u26A0\uFE0F L\u01AFU \xDD</p><p>Nh\u01B0 m\xF4 h\xECnh \u0111\u1EC1 b\xE0i th\xEC <code>routerISP</code> kh\xF4ng thu\u1ED9c ph\u1EA1m v\u1ECB d\u1ECBch v\u1EE5 <code>Quagga</code> n\xEAn ta b\u1ECF kh\xF4ng c\u1EA5u h\xECnh <code>Quagga</code> cho <code>routerISP</code></p></div><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} M\u1EB8O</p><p>S\u1EED d\u1EE5ng l\u1EC7nh sau \u0111\u1EC3 copy qua c\xE1c router c\xF2n l\u1EA1i</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>cp -r router1/etc router2
cp -r router1/etc router3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><h3 id="khoi-\u0111ong-may-ao-2" tabindex="-1"><a class="header-anchor" href="#khoi-\u0111ong-may-ao-2" aria-hidden="true">#</a> Kh\u1EDFi \u0111\u1ED9ng m\xE1y \u1EA3o</h3><p>S\u1EED d\u1EE5ng l\u1EC7nh <code>kathara lstart</code> \u0111\u1EC3 kh\u1EDFi t\u1EA1o h\u1EC7 th\u1ED1ng m\xE1y \u1EA3o:</p><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/04-15-35-46-Screen Shot 2021-11-04 at 15.35.43.png"><p>==&gt; Kh\xF4ng b\xE1o l\u1ED7i, \u0111\xE3 th\xE0nh c\xF4ng ch\u1EA1y h\u1EC7 th\u1ED1ng m\xE1y \u1EA3o</p></blockquote><p>S\u1EED d\u1EE5ng l\u1EC7nh sau \u0111\xE2y tr\xEAn t\u1EEBng <code>router</code> \u0111\u1EC3 ki\u1EC1m tra d\u1ECBch v\u1EE5 <code>Quagga</code>:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/etc/init.d/quagga status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/04-15-39-17-Screen Shot 2021-11-04 at 15.38.06.png"></blockquote><h3 id="kiem-tra-may-ao" tabindex="-1"><a class="header-anchor" href="#kiem-tra-may-ao" aria-hidden="true">#</a> Ki\u1EC3m tra m\xE1y \u1EA3o</h3><h4 id="tinh-lien-thong-cua-cac-router" tabindex="-1"><a class="header-anchor" href="#tinh-lien-thong-cua-cac-router" aria-hidden="true">#</a> T\xEDnh li\xEAn th\xF4ng c\u1EE7a c\xE1c router</h4><h4 id="tu-routerisp-toi-cac-router-khac" tabindex="-1"><a class="header-anchor" href="#tu-routerisp-toi-cac-router-khac" aria-hidden="true">#</a> T\u1EEB <code>routerISP</code> t\u1EDBi c\xE1c <code>router</code> kh\xE1c</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ping 200.117.68.1 -c 5 #router1
ping 192.168.1.1 -c 5 #router2
ping 192.168.2.1 -c 5 #router3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/04-15-45-44-Screenshot from 2021-11-04 15-44-16.png"></blockquote><p>==&gt; Th\xE0nh c\xF4ng</p><h4 id="tu-router-bat-ky-toi-routerisp" tabindex="-1"><a class="header-anchor" href="#tu-router-bat-ky-toi-routerisp" aria-hidden="true">#</a> T\u1EEB <code>router</code> b\u1EA5t k\u1EF3 t\u1EDBi <code>routerISP</code></h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ping 200.117.68.2 -c 3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/04-15-47-16-Screen Shot 2021-11-04 at 15.47.09.png"></blockquote><p>==&gt; Th\xE0nh c\xF4ng</p><h4 id="tu-pc2-toi-pc3-va-nguoc-lai" tabindex="-1"><a class="header-anchor" href="#tu-pc2-toi-pc3-va-nguoc-lai" aria-hidden="true">#</a> T\u1EEB <code>pc2</code> t\u1EDBi <code>pc3</code> v\xE0 ng\u01B0\u1EE3c l\u1EA1i</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ping 192.168.2.111 -c 3 #t\u1EEB pc2 sang pc3
ping 192.168.1.200 -c 3 #t\u1EEB pc3 sang pc2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/04-15-49-57-Screen Shot 2021-11-04 at 15.49.53.png" width="400"></blockquote><p>==&gt; Th\xE0nh c\xF4ng</p><h4 id="tu-pc2-va-pc3-toi-routerisp-va-nguoc-lai" tabindex="-1"><a class="header-anchor" href="#tu-pc2-va-pc3-toi-routerisp-va-nguoc-lai" aria-hidden="true">#</a> T\u1EEB <code>pc2</code> v\xE0 <code>pc3</code> t\u1EDBi <code>routerISP</code> v\xE0 ng\u01B0\u1EE3c l\u1EA1i</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ping 200.217.68.2 -c 5 #g\xF5 tr\xEAn pc2 v\xE0 pc3
ping 192.168.2.111 #g\xF5 tr\xEAn routerISP
ping 192.168.1.200 #g\xF5 tr\xEAn routerISP
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/04-21-08-37-Screen Shot 2021-11-04 at 21.08.32.png" width="400"><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/04-21-09-27-Screen Shot 2021-11-04 at 21.09.23.png" width="400"><div class="custom-container tip"><p class="custom-container-title">\u{1F4A1} NH\u1EACN X\xC9T</p><ul><li><p>C\xE1c router trong h\u1EC7 th\u1ED1ng <code>ping</code> \u0111\u01B0\u1EE3c cho nhau</p></li><li><p>2 thi\u1EBFt b\u1ECB <code>pc2</code> v\xE0 <code>pc3</code> ping \u0111\u01B0\u1EE3c cho nhau</p></li><li><p><code>pc2</code> v\xE0 <code>pc3</code> g\u1EEDi \u0111\u01B0\u1EE3c <code>ICMP echo request</code> cho <code>routerISP</code> nh\u01B0ng <code>routerISP</code> kh\xF4ng g\u1EEDi \u0111\u01B0\u1EE3c <code>ICMP echo reply</code> \u0111\u1EBFn <code>pc2</code> v\xE0 c\u1EA3 <code>pc3</code> (<em>v\xEC <code>routerISP</code> kh\xF4ng n\u1EB1m trong \u0111\u1ECBnh tuy\u1EBFn n\u1ED9i b\u1ED9 v\xE0 ch\u1EC9 li\xEAn k\u1EBFt v\u1EDBi <code>router1</code></em>)</p></li></ul></div><h3 id="huy-he-thong-may-ao-1" tabindex="-1"><a class="header-anchor" href="#huy-he-thong-may-ao-1" aria-hidden="true">#</a> H\u1EE7y h\u1EC7 th\u1ED1ng m\xE1y \u1EA3o</h3><p>S\u1EED d\u1EE5ng l\u1EC7nh <code>kathara lclean</code> \u0111\u1EC3 h\u1EE7y h\u1EC7 th\u1ED1ng m\xE1y \u1EA3o:</p><img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/11/04-23-41-22-Screen Shot 2021-11-04 at 23.41.17.png" width="600">`,244);function ve(me,be){const i=d("ExternalLinkIcon");return r(),o("div",null,[l,e("div",u,[h,e("ul",null,[e("li",null,[e("p",null,[p,g,e("em",null,[e("a",v,[m,t(i)]),b]),f,k,x,e("em",null,[_,e("a",S,[y,t(i)])]),w,q,I,P,T]),e("ol",null,[Z,z,B,e("li",null,[e("p",null,[N,e("a",C,[D,t(i)]),F,H])]),e("li",null,[e("p",null,[R,e("a",K,[O,t(i)]),L,e("a",M,[Q,t(i)])])])]),G]),e("li",null,[e("p",null,[A,E,e("em",null,[e("a",X,[U,t(i)])]),V,W,j,J,Y,e("a",$,[ee,t(i)]),ne,ie,te,ae]),e("ol",null,[ce,de,e("li",null,[e("p",null,[re,e("a",oe,[se,t(i)]),le,e("a",ue,[he,t(i)])])])]),pe])])]),ge])}var ke=c(s,[["render",ve],["__file","4.html.vue"]]);export{ke as default};
